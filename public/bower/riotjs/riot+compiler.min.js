/* Riot 2.0.7, @license MIT, (c) 2015 Muut Inc. + contributors */
(function(){var e={version:"v2.0.7"};"use strict";e.observable=function(e){e=e||{};var t={};e.on=function(r,n){if(typeof n=="function"){r.replace(/\S+/g,function(e,r){(t[e]=t[e]||[]).push(n);n.typed=r>0})}return e};e.off=function(r,n){if(r=="*")t={};else if(n){var i=t[r];for(var o=0,u;u=i&&i[o];++o){if(u==n){i.splice(o,1);o--}}}else{r.replace(/\S+/g,function(e){t[e]=[]})}return e};e.one=function(t,r){if(r)r.one=1;return e.on(t,r)};e.trigger=function(r){var n=[].slice.call(arguments,1),i=t[r]||[];for(var o=0,u;u=i[o];++o){if(!u.busy){u.busy=1;u.apply(e,u.typed?[r].concat(n):n);if(u.one){i.splice(o,1);o--}else if(i[o]!==u){o--}u.busy=0}}return e};return e};(function(e,t){if(!this.top)return;var r=location,n=e.observable(),i=u(),o=window;function u(){return r.hash.slice(1)}function a(e){return e.split("/")}function f(e){if(e.type)e=u();if(e!=i){n.trigger.apply(null,["H"].concat(a(e)));i=e}}var c=e.route=function(e){if(e[0]){r.hash=e;f(e)}else{n.on("H",e)}};c.exec=function(e){e.apply(null,a(u()))};c.parser=function(e){a=e};o.addEventListener?o.addEventListener(t,f,false):o.attachEvent("on"+t,f)})(e,"hashchange");e._tmpl=function(){var e={},t=/("|').+?[^\\]\1|\.\w*|\w*:|\b(?:this|true|false|null|undefined|new|typeof|Number|String|Object|Array|Math|Date|JSON)\b|([a-z_]\w*)/gi;return function(t,n){return t&&(e[t]=e[t]||r(t))(n)};function r(e,t){t=(e||"{}").replace(/\\{/g,"￰").replace(/\\}/g,"￱").split(/({[\s\S]*?})/);return new Function("d","return "+(!t[0]&&!t[2]?n(t[1]):"["+t.map(function(e,t){return t%2?n(e,1):'"'+e.replace(/\n/g,"\\n").replace(/"/g,'\\"')+'"'}).join(",")+'].join("")').replace(/\uFFF0/g,"{").replace(/\uFFF1/g,"}"))}function n(e,t){e=e.replace(/\n/g," ").replace(/^[{ ]+|[ }]+$|\/\*.+?\*\//g,"");return/^\s*[\w-"']+ *:/.test(e)?"["+e.replace(/\W*([\w-]+)\W*:([^,]+)/g,function(e,r,n){return n.replace(/\w[^,|& ]*/g,function(e){return i(e,t)})+'?"'+r+'":"",'})+'].join(" ")':i(e,t)}function i(e,r){return"(function(v){try{v="+(e.replace(t,function(e,t,r){return r?"d."+r:e})||"x")+"}finally{return "+(r?'!v&&v!==0?"":v':"v")+"}}).call(d)"}}();(function(e,t){if(!t)return;var r=e._tmpl,n=[],i={},o=document;function u(e,t){for(var r=0;r<(e||[]).length;r++){if(t(e[r],r)===false)r--}}function a(e,t){t&&Object.keys(t).map(function(r){e[r]=t[r]});return e}function f(e,t){return e.filter(function(e){return t.indexOf(e)<0})}function c(e,t){e=t(e)===false?e.nextSibling:e.firstChild;while(e){c(e,t);e=e.nextSibling}}function l(e){var t=e.trim().slice(1,3).toLowerCase(),r=/td|th/.test(t)?"tr":t=="tr"?"tbody":"div";el=o.createElement(r);el.innerHTML=e;return el}function s(e,t){t.trigger("update");u(e,function(e){var n=e.tag,i=e.dom;function o(e){i.removeAttribute(e)}if(e.loop){o("each");return m(e,t)}if(n)return n.update?n.update():e.tag=d({tmpl:n[0],fn:n[1],root:i,parent:t});var u=e.attr,a=r(e.expr,t);if(a==null)a="";if(e.value===a)return;e.value=a;if(!u)return i.nodeValue=a;if(!a&&e.bool||/obj|func/.test(typeof a))o(u);if(typeof a=="function"){i[u]=function(e){e=e||window.event;e.which=e.which||e.charCode||e.keyCode;e.target=e.target||e.srcElement;e.currentTarget=i;e.item=t.__item||t;if(a.call(t,e)!==true){e.preventDefault&&e.preventDefault();e.returnValue=false}t.update()}}else if(/^(show|hide|if)$/.test(u)){o(u);if(u=="hide")a=!a;i.style.display=a?"":"none"}else{if(e.bool){i[u]=a;if(!a)return;a=u}i.setAttribute(u,a)}});t.trigger("updated")}function p(e){var t={},r=[];c(e,function(e){var r=e.nodeType,o=e.nodeValue;if(r==3&&e.parentNode.tagName!="STYLE"){n(e,o)}else if(r==1){o=e.getAttribute("each");if(o){n(e,o,{loop:1});return false}var a=i[e.tagName.toLowerCase()];u(e.attributes,function(r){var i=r.name,o=r.value;if(/^(name|id)$/.test(i))t[o]=e;if(!a){var u=i.split("__")[1];n(e,o,{attr:u||i,bool:u});if(u){e.removeAttribute(i);return false}}});if(a)n(e,0,{tag:a})}});return{expr:r,elem:t};function n(e,t,n){if(t?t.indexOf("{")>=0:n){var i={dom:e,expr:t};r.push(a(i,n||{}))}}}function d(t){var i=t.opts||{},f=l(t.tmpl),c=t.root,d=t.parent,m=p(f),v={root:c,opts:i,parent:d,__item:t.item},g={};a(v,m.elem);u(c.attributes,function(e){g[e.name]=e.value});function h(){Object.keys(g).map(function(e){var t=i[e]=r(g[e],d||v);if(typeof t=="object")c.removeAttribute(e)})}h();if(!v.on){e.observable(v);delete v.off}if(t.fn)t.fn.call(v,i);v.update=function(e,t){if(d&&f&&!f.firstChild){c=d.root;f=null}if(t||o.body.contains(c)){a(v,e);a(v,v.__item);h();s(m.expr,v);!t&&v.__item&&d.update();return true}else{v.trigger("unmount")}};v.update(0,true);while(f.firstChild){if(t.before)c.insertBefore(f.firstChild,t.before);else c.appendChild(f.firstChild)}v.trigger("mount");n.push(v);return v}function m(e,t){if(e.done)return;e.done=true;var n=e.dom,i=n.previousSibling,o=n.parentNode,u=n.outerHTML,a=e.expr,c=a.split(/\s+in\s+/),l=[],s,p;if(c[1]){a="{ "+c[1];p=c[0].slice(1).trim().split(/,\s*/)}t.one("mount",function(){var e=n.parentNode;if(e){o=e;o.removeChild(n)}});function m(){return Array.prototype.indexOf.call(o.childNodes,i)+1}t.on("updated",function(){var e=r(a,t);is_array=Array.isArray(e);if(is_array)e=e.slice(0);else{if(!e)return;var n=JSON.stringify(e);if(n==s)return;s=n;e=Object.keys(e).map(function(t,r){var n={};n[p[0]]=t;n[p[1]]=e[t];return n})}f(l,e).map(function(e){var t=l.indexOf(e);o.removeChild(o.childNodes[m()+t]);l.splice(t,1)});f(e,l).map(function(r,n){var i=e.indexOf(r);if(p&&!s){var a={};a[p[0]]=r;a[p[1]]=i;r=a}var f=d({before:o.childNodes[m()+i],parent:t,tmpl:u,item:r,root:o});t.on("update",function(){f.update(0,true)})});l=e})}e.tag=function(e,t,r){r=r||noop,i[e]=[t,r]};e.mountTo=function(e,t,r){var n=i[t];return n&&d({tmpl:n[0],fn:n[1],root:e,opts:r})};e.mount=function(t,r){if(t=="*")t=Object.keys(i).join(", ");var n=[];u(o.querySelectorAll(t),function(t){if(t.riot)return;var i=t.tagName.toLowerCase(),o=e.mountTo(t,i,r);if(o){n.push(o);t.riot=1}});return n};e.update=function(){return n=n.filter(function(e){return!!e.update()})}})(e,this.top)(function(t){var r=("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,"+"defaultchecked,defaultmuted,defaultselected,defer,disabled,draggable,enabled,formnovalidate,hidden,"+"indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,"+"pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,spellcheck,translate,truespeed,"+"typemustmatch,visible").split(",");var n="area,base,br,col,command,embed,hr,img,input,keygen,link,meta,param,source,track,wbr".split(",");var i={jade:h};var o={coffeescript:d,none:g,cs:d,es6:m,typescript:v};var u=/^<([\w\-]+)>([^\x00]*[\w\/]>$)?([^\x00]*?)^<\/\1>/gim,a=/<script(\s+type=['"]?([^>'"]+)['"]?)?>([^\x00]*?)<\/script>/gm,f=/<!--.*?-->/g,c=/<([\w\-]+)([^\/]*)\/\s*>/g,l=/^\s*\/\/.*$/gm,s=/\/\*[^\x00]*?\*\//gm;function p(e,t,i){e=e.replace(/\s+/g," ");e=e.trim().replace(f,"");e=e.replace(/=(\{[^\}]+\})([\s\>])/g,'="$1"$2');e=e.replace(/([\w\-]+)=["'](\{[^\}]+\})["']/g,function(e,t,n){if(r.indexOf(t.toLowerCase())>=0)t="__"+t;return t+'="'+n+'"'});if(t.expr){e=e.replace(/\{\s*([^\}]+)\s*\}/g,function(e,r){return"{"+b(r,t,i).trim()+"}"})}e=e.replace(c,function(e,t,r){var i="<"+t+(r?" "+r.trim():"")+">";if(n.indexOf(t.toLowerCase())==-1)i+="</"+t+">";return i});e=e.replace(/'/g,"\\'");e=e.replace(/\\[{}]/g,"\\$&");if(t.compact)e=e.replace(/> </g,"><");return e}function d(e){return require("coffee-script").compile(e,{bare:true})}function m(e){return require("6to5").transform(e).code}function v(e){return require("typescript-simple")(e)}function g(e){return e}function h(e){return require("jade").render(e,{pretty:true})}function y(e){e=e.replace(l,"").replace(s,"");var t=e.split("\n"),r="";t.forEach(function(e,n){var i=e.trim();if(i[0]!="}"&&i.indexOf("(")>0&&i.slice(-1)=="{"&&i.indexOf("function")==-1){var o=/(\s+)([\w]+)\s*\(([\w,\s]*)\)\s*\{/.exec(e);if(o&&!/^(if|while|switch|for)$/.test(o[2])){t[n]=o[1]+"this."+o[2]+" = function("+o[3]+") {";r=o[1]}}if(e.slice(0,r.length+1)==r+"}"){t[n]+=".bind(this);";r=""}});return t.join("\n")}function b(e,t,r){var n=t.parser||(r?o[r]:y);if(!n)throw new Error('Parser not found "'+r+'"');return n(e,t)}function w(e,t){var r=i[e];if(!r)throw new Error('Template parser not found "'+e+'"');return r(t)}function x(e,t){t=t||{};if(t.template)e=w(t.template,e);return e.replace(u,function(e,r,n,i){n=n||"";var o=t.type;if(!i.trim()){n=n.replace(a,function(e,t,r,n){if(r)o=r.replace("text/","");i=n;return""})}return"riot.tag('"+r+"', '"+p(n,t,o)+"', function(opts) {"+b(i,t,o)+"\n});"})}if(t){return module.exports={html:p,compile:x}}var C=document,_,O;function j(e,t){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(r.readyState==4&&r.status==200)t(r.responseText)};r.open("GET",e,true);r.send("")}function E(e){var t=/[ \t]+/.exec(e);if(t)e=e.replace(new RegExp("^"+t[0],"gm"),"");return e}function N(e){var t=C.createElement("script"),r=C.documentElement;t.text=x(e);r.appendChild(t);r.removeChild(t)}function S(e){var t=C.querySelectorAll('script[type="riot/tag"]');[].map.call(t,function(r,n){var i=r.getAttribute("src");function o(i){r.parentNode.removeChild(r);N(i);if(n+1==t.length){_.trigger("ready");O=true;e&&e()}}return i?j(i,o):o(E(r.innerHTML))})}function T(t,r){if(typeof t=="string"){var n=E(x(t));if(!r)N(n);return n}if(typeof t!="function")t=undefined;if(O)return t&&t();if(_){t&&_.on("ready",t)}else{_=e.observable();S(t)}}var A=e.mount,L=e.mountTo;e.mount=function(e,t){T(function(){A(e,t)})};e.mountTo=function(e,t,r){T(function(){L(e,t,r)})};e._compile=function(e){return T(e,true)}})(!this.top);if(typeof exports==="object")module.exports=e;else if(typeof define==="function"&&define.amd)define(function(){return e});else this.riot=e})();